
<div class="fixed-top uk-padding-small container-fluid uk-text-right bg-gradient-secondary" style="display: inline-block;z-index: 20;"
    id="top">
    <!--<button class="btn bg-primary uk-margin-small-right uk-margin-remove-top  uk-border-circle uk-padding-remove"
        type="button" uk-toggle="target: #offcanvas-nav-secondary"
        style="box-shadow: none;width: 40px;height: 40px;display: inline-block !important;" uk-tooltip='Notifications'>

        <i class="bell large {% if notifications %} loading {% endif %} icon uk-position-center"></i>
       </button>-->
    <div class="ui fluid category search uk-text-center " style="">
        <div class="ui uk-padding-small col-cmd-8 col-csxx-10 col-csx-10 col-css-10 col-csm-10 " style="float:none">
            <form style="width: 100%;">

                <div class="uk-inline" style="width: 100%;">
                    <span class="uk-form-icon" uk-icon="icon: search"></span>
                    <input class="uk-input uk-border-pill" id="host-verification-search" type="text"
                        placeholder="Enter registration ID">
                </div>

            </form>
            <div id="verification-result" class="uk-text-center uk-margin-small-bottom"></div>
        </div>
    </div>

    <ul class="navbar-nav align-items-center  ml-auto ml-md-0 uk-position-center-right" style="display: inline-block;">
        <li class="nav-item dropdown">
            <a class="nav-link pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                <div class="media align-items-center">
                    <span class="avatar avatar-sm rounded-circle">
                        <img alt="Image placeholder" src="../assets/img/theme/team-4.jpg">
                    </span>
                    <div class="media-body  ml-2  d-none d-lg-block">
                        <span class="mb-0 text-sm  font-weight-bold">John Snow</span>
                    </div>
                </div>
            </a>
            <div class="dropdown-menu  dropdown-menu-right ">
                <div class="dropdown-header noti-title">
                    <h6 class="text-overflow m-0">Welcome!</h6>
                </div>
                <a href="#!" class="dropdown-item">
                    <i class="ni ni-single-02"></i>
                    <span>My profile</span>
                </a>
                <a href="#!" class="dropdown-item">
                    <i class="ni ni-settings-gear-65"></i>
                    <span>Settings</span>
                </a>
                <a href="#!" class="dropdown-item">
                    <i class="ni ni-calendar-grid-58"></i>
                    <span>Activity</span>
                </a>
                <a href="#!" class="dropdown-item">
                    <i class="ni ni-support-16"></i>
                    <span>Support</span>
                </a>
                <div class="dropdown-divider"></div>
                <a href="#!" class="dropdown-item">
                    <i class="ni ni-user-run"></i>
                    <span>Logout</span>
                </a>
            </div>
        </li>
    </ul>
</div>
<div class="container-fluid uk-text-center uk-margin-xlarge-top" style="">

    <div class="uk-margin-small-top">
        <div class="text-white-50">
            SPONSORED
        </div>
        {% if upcomingevents %}

        <div style="display: flex;flex-wrap: wrap;justify-content: center;">
            {% for hostedevent in upcomingevents %}
            <div class="card col-cmd-3-e col-csxx-14 col-csx-7 col-css-7 col-csm-5-e uk-padding-small bg-transparent shadow-none"
                style=" min-height: 150px;max-height:250px;">
                <div class=" bg-translucent-success uk-margin-small-top uk-margin-small-left rounded-circle uk-padding-small uk-text-small uk-text-bold uk-position-top text-white" 
                style="z-index: 5; height: 40px;width: 40px;font-family: cursive;line-height: 11px;">
                {{hostedevent.start_date_time.day}} <br>
                {{hostedevent.start_date_time|date:'M'}}
                </div>
                <div class=" bg-translucent-danger uk-margin-medium-top uk-margin-small-left rounded-circle uk-padding-small uk-text-small uk-text-bold uk-position-top text-white" 
                style="z-index: 5; height: 40px;width: 40px;font-family: cursive;line-height: 11px;">
                {{hostedevent.end_date_time.day}} <br>
                {{hostedevent.end_date_time|date:'M'}}
                </div>
                <div class="card-body uk-padding-remove overflow-hidden uk-border-rounded">
                    <div class="ui move right reveal" style="width: 100%;overflow: visible;height: 100%;">
                        <div class="visible content" style="width: 100%;overflow: visible;height: 100%;">
                            {% if hostedevent.thumbnail %}
                            <img src="{{hostedevent.thumbnail.url}}" class="ui image"
                                style="width: 100%; min-height: 100%;max-height:100%;">
                            {% endif %}
                        </div>
                        <div class="hidden content" style="width: 100%;height: 100%;">
                            {% if hostedevent.thumbnail %}
                            <img src="{{hostedevent.thumbnail.url}}" class="ui image"
                                style="width: 100%; min-height: 100%;max-height:100%;">
                            {% endif %}
                            <div class="uk-overlay uk-position-center uk-padding-remove-horizontal"
                                style="width: 100%; height:100%; background-color:rgba(70, 130, 180, 0.7);">
                                    <div class="flex-row row uk-margin-remove  uk-border-rounded uk-padding-small text-light uk-text-small uk-position-center" style="font-weight: bold;z-index: 2;cursor:default;">
              
                                      <div class=" uk-padding-small uk-text-center bg-dark uk-border-rounded" style="width: max-content;">
                                        <div id="days{{hostedevent.eventid}}">
              
                                        </div>
              
                                        <div>
                                          DAYS
                                        </div>
                                      </div>
                                      <div class="uk-divider-vertical uk-margin-remove" style="height: 40px;"></div>
                                      <div class=" uk-padding-small uk-text-center  bg-dark uk-border-rounded" style="width: max-content;">
                                        <div id="hours{{hostedevent.eventid}}">
              
                                        </div>
              
                                        <div>
                                          HOURS
                                        </div>
                                      </div>
                                      <div class="uk-divider-vertical uk-margin-remove" style="height: 40px;"></div>
              
                                      <div class=" uk-padding-small uk-text-center  bg-dark uk-border-rounded" style=" width: max-content;">
                                        <div id="minutes{{hostedevent.eventid}}">
              
                                        </div>
              
                                        <div>
                                          MINS
                                        </div>
                                      </div>
                                      <div class="uk-divider-vertical uk-margin-remove" style="height: 40px;"></div>
                                      <div class=" uk-padding-small  uk-text-center  bg-dark uk-border-rounded" style=" width: max-content;">
                                        <div id="seconds{{hostedevent.eventid}}">
              
                                        </div>
              
                                        <div>
                                          SECS
                                        </div>
                                      </div>
                                    </div>
                                  
                                
                                <div class="card-footer bg-transparent uk-text-center container-fluid uk-position-bottom-center"
                                    style="display: inline-block;">
                                    <a class="btn btn-icon btn-info"
                                        href="{% url 'event_details' eventid=hostedevent.eventid hostedeventid=hostedevent.hostedeventid %}" type="button">
                                        <span class="btn-inner--icon"><i class="icon plus"></i></span>
                                        <span class="btn-inner--text">More</span>
                                    </a>



                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            {% endfor %}
        </div>




        {% endif %}
    </div>

</div>



<script>
                {% for event in upcomingevents %}

    $(function () {
      var suspension_days = (Number({{ hostedevent.start_time_timestamp }}) - Number({{ server_timestamp }})) /(86400)
    var suspension_seconds = Math.ceil(suspension_days * 24 * 60 * 60)
    var suspension_minutes = Math.ceil(suspension_seconds / 60)
    var total_remaining_days = suspension_minutes / 60 / 24
    var remain_days = total_remaining_days | 0
    var total_remaining_hours = (suspension_minutes / 60) % 24
    var remain_hours = (total_remaining_hours | 0)
    var total_remaining_minutes = (total_remaining_hours - remain_hours) * 60
    var remain_minutes = (total_remaining_minutes) | 0
    var remain_seconds = Math.round((total_remaining_minutes - remain_minutes) * 60)
    // if (remain_minutes < 1) {
    //     $('#briefly-suspended-message{{hostedevent.eventid}}').html('Your account is briefly suspended. Kindly wait for ' + remain_seconds + ' seconds.')
  
    // }
    // else {
    //     $('#briefly-suspended-message{{hostedevent.eventid}}').html('Your account is briefly suspended. Kindly wait for ' + remain_days + ' days ' + remain_hours + ' hours ' + remain_minutes + ' minutes and ' + remain_seconds + ' seconds.')
  
    // }
  
    function updateTime() {
  
      if (remain_seconds >= 1) {
        remain_seconds--
        $('#days{{hostedevent.eventid}}').html(remain_days)
        $('#hours{{hostedevent.eventid}}').html(remain_hours)
        $('#minutes{{hostedevent.eventid}}').html(remain_minutes)
        $('#seconds{{hostedevent.eventid}}').html(remain_seconds)
  
      }
      else {
        remain_seconds = 60
        remain_minutes--
        $('#days{{hostedevent.eventid}}').html(remain_days)
        $('#hours{{hostedevent.eventid}}').html(remain_hours)
        $('#minutes{{hostedevent.eventid}}').html(remain_minutes)
        $('#seconds{{hostedevent.eventid}}').html(remain_seconds)
        if (remain_minutes >= 1) { }
        else {
          remain_hours--
          remain_minutes = 60
  
          $('#days{{hostedevent.eventid}}').html(remain_days)
          $('#hours{{hostedevent.eventid}}').html(remain_hours)
          $('#minutes{{hostedevent.eventid}}').html(remain_minutes)
          $('#seconds{{hostedevent.eventid}}').html(remain_seconds)
          if (remain_hours >= 1) {
            $('#days{{hostedevent.eventid}}').html(remain_days)
            $('#hours{{hostedevent.eventid}}').html(remain_hours)
            $('#minutes{{hostedevent.eventid}}').html(remain_minutes)
            $('#seconds{{hostedevent.eventid}}').html(remain_seconds)
          }
          else {
            if (remain_days < 1) {
              $('#days{{hostedevent.eventid}}').html(remain_days)
              $('#hours{{hostedevent.eventid}}').html(remain_hours)
              $('#minutes{{hostedevent.eventid}}').html(remain_minutes)
              $('#seconds{{hostedevent.eventid}}').html(remain_seconds)
            }
            else {
              remain_days--
              remain_hours = 23
            }
  
            $('#days{{hostedevent.eventid}}').html(remain_days)
            $('#hours{{hostedevent.eventid}}').html(remain_hours)
            $('#minutes{{hostedevent.eventid}}').html(remain_minutes)
            $('#seconds{{hostedevent.eventid}}').html(remain_seconds)
          }
        }
      }
      // else{
      //     $('#days{{hostedevent.eventid}}').html(remain_days)
      // $('#hours{{hostedevent.eventid}}').html(remain_hours)
      // $('#minutes{{hostedevent.eventid}}').html(remain_minutes)
      // $('#seconds{{hostedevent.eventid}}').html(remain_seconds)
      // }
  
    }
    setInterval(updateTime, 1000)
  
      // $('#{{hostedevent.eventid}}').countdowntimer({
      //     seconds: 300 - suspension_seconds,
      //     size: "lg",
      //     displayFormat: 'DHMS',
  
      // });
  
  });

  {% endfor %}
  </script>
<script>



    {
        (function ($) { //Most read async
            var revealbuttondown = $('.reveal-all-events')
            revealbuttondown.transition('set looping').transition('bounce', '10000ms');
            var revealbuttonup = $('.reveal-all-events-up')
            revealbuttondown.on('click', function () {
                revealbuttondown.transition('remove looping')
                revealbuttonup.transition('set looping').transition('bounce', '10000ms');
                $('.second-window').removeClass('visible')
                $('.first-window').removeClass('hidden')
                $('.second-window').addClass('hidden')
                $('.first-window').addClass('visible')

                    ;

            });

            revealbuttonup.on('click', function () {
                revealbuttonup.transition('remove looping')
                $('.windows').addClass('active')
                revealbuttondown.transition('set looping').transition('bounce', '10000ms');
                $('.second-window').removeClass('hidden')
                $('.first-window').removeClass('visible')
                $('.second-window').addClass('visible')
                $('.first-window').addClass('hidden')

                    ;

            });
        }(jQuery))
    };

    {
        (function ($) { //Most read async
            $('.signout').on('click', function () {

                logout()
            });
        }(jQuery))
    };
    var loggedOut = false

    function logout() {
        $.ajax({

            beforeSend: function () {
                $('#loader-cover').show()
            },
            complete: function () {
                $('#loader-cover').hide()
            },
            type: 'get',
            url: "{% url 'account_logout' %}",
            data: {
                'csrfmiddlewaretoken': window.CSRF_TOKEN, // from index.html
            },
            success: function (response) {
                window.location = '{% url 'dashboard' %}'

                loggedOut = true
            },
            error: function (xhr, status, error) {
                alert('there was an error')
            }
        });
    };


    // function callIdle() {
    //     if (loggedOut == true) {

    //     }
    //     else {
    //         logout()

    //     }
    // }


    // $(document).idle({
    //     onIdle: function () {
    //         callIdle()
    //     },

    //     idle: 10000,
    // })


    $('.ui.dropdown').dropdown({ clearable: true, })
        ;
</script>


